<nz-page-header
    [nzBackIcon]="'arrow-left'"
>
    <nz-page-header-title>Безымянный</nz-page-header-title>
    <nz-page-header-subtitle>Информационное дополнение</nz-page-header-subtitle>
    <nz-page-header-extra>
        <nz-space>
            <!-- <button *nzSpaceItem nz-button>
                <span nz-icon nzType="expand"></span>
            </button>
            <button *nzSpaceItem nz-button>
                <span nz-icon nzType="printer"></span>
            </button> -->
            <button *nzSpaceItem nz-button>
                <span nz-icon nzType="info-circle"></span>
            </button>
            <button *nzSpaceItem nz-button nzType="primary">
                <span nz-icon nzType="save"></span>
                Сохранить
            </button>
            <div *nzSpaceItem>
                <button
                    nz-button
                    nzNoAnimation
                    nz-dropdown
                    [nzDropdownMenu]="menu"
                    nzPlacement="bottomRight"
                    style="padding: 0"
                >
                    <span nz-icon nzType="more" nzTheme="outline" style="font-size: 18px; vertical-align: top;"></span> 
                </button>
                <nz-dropdown-menu #menu="nzDropdownMenu">
                    <ul nz-menu>
                        <li nz-menu-item nzWarning>
                            <span nz-icon nzType="reload"></span>
                            Сбросить к началу
                        </li>
                        <li nz-menu-item nzDanger>
                            <span nz-icon nzType="delete"></span>
                            Удалить
                        </li>
                    </ul>
                </nz-dropdown-menu>
            </div>
        </nz-space>
    </nz-page-header-extra>
</nz-page-header>
<nz-content>
    <div
        class="bi-constructor"
        [class.bi-expand-editor]="biExpandEditor"
    >
        <div class="inner-content bi-constructor-sources">
            <div class="bi-sources-header">
                <strong>Источники</strong>
                <button nz-button nzType="text" [nzSize]="'small'" title="Свернуть панель">
                    <span nz-icon nzType="menu-fold"></span>
                </button>
            </div>
            <div class="bi-sources-search">
                <nz-input-group [nzSuffix]="suffixIconSearch" nzSize="small">
                    <input type="text" nz-input placeholder="Поиск в источнике"/>
                </nz-input-group>
                <ng-template #suffixIconSearch nzSize="small">
                    <span nz-icon nzType="search"></span>
                </ng-template>
            </div>
            <div class="bi-sources-list">
                <nz-tree [nzData]="nodes" nzShowLine (nzClick)="nzEvent($event)"></nz-tree>
            </div>
        </div>
        <div class="inner-content bi-constructor-settings">
            <div class="bi-settings-header">
                <strong>Настройки</strong>
                <button nz-button nzType="text" [nzSize]="'small'" title="Свернуть панель">
                    <span nz-icon nzType="menu-fold"></span>
                </button>
            </div>
            <div class="bi-settings-list">
                аккордионы
            </div>
        </div>

<!-- 
    <div class="bi-container" --bi-container-zoom: 1, --bi-cursor: var(url("data:image/svg+xml, ..."))>
        <div class="bi-canvas">
            <div class="bi-shapes" transform: scale(1) translate(0px, 0px);>
                <div class="bi-shape" >
 -->

        <div class="inner-content bi-constructor-filters">
            <span nz-icon nzType="filter" nzTheme="fill"></span>
            <div>

            </div>
        </div>
        <div class="bi-constructor-editor">

            <!--
            <div
                class="bi-editor"
                [ngStyle]="getEditorCanvasBgTransform()"
            >

                < !-- <svg class="tl-grid" version="1.1" xmlns="http://www.w3.org/2000/svg"
                    [ngStyle]="getCanvasTransform()"
                >
                    <defs>
                        <pattern id="grid-64" width="640" height="640" patternUnits="userSpaceOnUse">
                            <circle class="tl-grid-dot" cx="0.5" cy="0.5" r="1" opacity="1"></circle>
                        </pattern>
                        <pattern id="grid-16" width="160" height="160" patternUnits="userSpaceOnUse">
                            <circle class="tl-grid-dot" cx="0.5" cy="0.5" r="1" opacity="1"></circle>
                        </pattern>
                        <pattern id="grid-4" width="40" height="40" patternUnits="userSpaceOnUse">
                            <circle class="tl-grid-dot" cx="0.5" cy="0.5" r="1" opacity="1"></circle>
                        </pattern>
                        <pattern id="grid-1" width="10" height="10" patternUnits="userSpaceOnUse">
                            <circle class="tl-grid-dot" cx="0.5" cy="0.5" r="1" opacity="0.2"></circle>
                        </pattern>
                    </defs>
                    <rect width="100%" height="100%" fill="url(#grid-64)"></rect>
                    <rect width="100%" height="100%" fill="url(#grid-16)"></rect>
                    <rect width="100%" height="100%" fill="url(#grid-4)"></rect>
                    <rect width="100%" height="100%" fill="url(#grid-1)"></rect>
                </svg> -- >

                <div
                    class="bi-editor-page"
                    [ngStyle]="getCanvasTransform()"
                >
                    dash
                </div>
            </div>
            -->

            

            <div class="bi-canvas">
                <div class="bi-shapes">

                </div>
            </div>

            <div class="bi-editor-ui">
                <div class="bi-editor-ui">
                    <div class="bi-expand">
                        <button
                            (click) = "biExpandEditor = !biExpandEditor"
                            nz-button [nzType]="'link'" [nzSize]="'small'"
                        >
                            <span nz-icon nzType="expand" nzTheme="outline"></span>
                        </button>
                    </div>
                    <nz-button-group class="bi-zoom">
                        <button
                            (click)="canvasScale = canvasScale - 1"
                            (dblclick)="canvasScale = canvasScale - 10 >= CANVAS_SCALE_MIN ? canvasScale - 10 : CANVAS_SCALE_MIN"
                            nz-button [nzSize]="'small'"
                            nzTooltipTitle="Zoom out (Ctrl -)" nzTooltipPlacement="top" nz-tooltip
                            [disabled]="canvasScale <= CANVAS_SCALE_MIN"
                        >
                            <span nz-icon nzType="minus"></span>
                        </button>
                        <button
                            (click)="canvasScale = 100"
                            nz-button [nzSize]="'small'"
                            nzTooltipTitle="Zoom reset" nzTooltipPlacement="top" nz-tooltip
                            [disabled]="canvasScale === 100"
                        >
                            <small>{{canvasScale}}%</small>
                        </button>
                        <button
                            (click)="canvasScale = canvasScale + 1"
                            (dblclick)="canvasScale = canvasScale + 10 <= CANVAS_SCALE_MAX ? canvasScale + 10 : CANVAS_SCALE_MAX"
                            nz-button [nzSize]="'small'"
                            nzTooltipTitle="Zoom in (Ctrl =)" nzTooltipPlacement="top" nz-tooltip
                            [disabled]="canvasScale >= CANVAS_SCALE_MAX"
                        >
                            <span nz-icon nzType="plus"></span>
                        </button>
                    </nz-button-group>
                </div>
            </div>
        </div>
    </div>
</nz-content>